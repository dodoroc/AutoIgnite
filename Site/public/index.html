<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
    <link rel="icon" type="image/x-icon" href="data:,">
    <!-- <link rel="icon" href="data:image/x-icon;base64,AA"> -->
    <!-- <link rel="icon" href="data:image/x-icon;base64,AAAAAQAA"> -->
    <!-- <link rel="icon" href="data:image/bmp;base64,Qk0eAAAAAAAAABoAAAAMAAAAAQABAAEAGAAAAP8A"> -->
    <!-- <link rel="icon" href="data:image/gif;base64,R0lGODlhASABICAgIDs="> -->
    <title>AutoIgnite Dashboard</title>

    <style>
      :root {
        --clr-darkest:  hsl(0, 0%,  10%);
        --clr-darker:   hsl(0, 0%,  25%);
        --clr-dark:     hsl(0, 0%,  42%);
        --clr-median:   hsl(0, 0%,  50%);
        --clr-light:    hsl(0, 0%,  58%);
        --clr-lighter:  hsl(0, 0%,  75%);
        --clr-lightest: hsl(0, 0%,  90%);

        --clr-warn:     hsl(0, 100%, 53%);

        --font-size-h1: 1.476rem;
        --font-size-h2: 1.383rem;
        --font-size-h3: 1.296rem;
        --font-size-h4: 1.215rem;
        --font-size-h5: 1.138rem;
        --font-size-h6: 1.067rem;
        --font-size-rg: 1.000rem;
        --font-size-sm: 0.937rem;
        --font-size-xs: 0.878rem;

        --width-max: 1050px;

        --width-scrollbar: calc(100vw - 100%);
        --width-available: calc(100vw - (100vw - 100%));
      }

      @media (prefers-color-scheme: light) {
        :root {
        }
      }

      /*
      firebrick #b22222
      floralwhite #fffaf0
      ivory #fffff0
      maroon  #800000
      papayawhip  #ffefd5
      snow  #fffafa
      */

      html {
        overflow: hidden auto;
        overscroll-behavior: none;

        scrollbar-gutter: stable;
        scrollbar-width: thin;
        scrollbar-color: var(--clr-median) var(--clr-darkest);
      }

      html, body {
        margin: 0;
        padding: 0;

        font: normal normal 14px/1.4 tahoma, arial, sans-serif;
      }

      *, *::before, *::after {
        box-sizing: inherit;
        font: inherit;
      }

      body {
        position: relative;
        box-sizing: border-box;
        overflow: hidden;

        max-width: var(--width-max);
        margin: 0 auto;

        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        align-items: stretch;
        gap: 10px 0;
        padding: 5px;

        color: var(--clr-lighter);
        background: var(--clr-darkest);
        font-size: var(--font-size-rg);
      }

      h1 {
        margin: 0;
        padding: 0;
      }
      body > h1 {
        height: 2.1rem;
        line-height: 2.1rem;
        font-size: var(--font-size-h1);
      }
      section > h1 {
        font-size: var(--font-size-h3);
        line-height: 1;
        font-weight: lighter;
        font-variant-caps: all-small-caps;
      }

      button, input, textarea, select, datalist {
        color: var(--clr-darker);
        background-color: var(--clr-lighter);
        border: solid 1px var(--clr-lighter);
        outline: none;
        transition: 200ms linear;
        transition-property: border-color, background-color, color;
      }
      button, input:is([type="button"], [type="submit"], [type="clear"]) {
        text-align: center;
        cursor: pointer;
      }
      button:active, input:is([type="button"], [type="submit"], [type="clear"]):active {
        color: var(--clr-darkest);
        background-color: var(--clr-lightest);
        border-color: var(--clr-lightest);
      }
      :is(:not(button, input[type="button"], [type="checkbox"], [type="radio"])):focus {
        background-color: var(--clr-lightest);
        border-color: var(--clr-lightest);
      }
      input:is([type="checkbox"], [type="radio"]) {
        width: 16px;
        height: 16px;
        margin: 0;
        padding: 3px;
        color: var(--clr-lighter);
        background-color: transparent;
        background-clip: content-box;
        border: solid 1px var(--clr-lighter);

        appearance: none;
        zoom: 1;
      }
      input:is([type="checkbox"], [type="radio"]):enabled {
        cursor: pointer;
      }
      input:is([type="checkbox"], [type="radio"]):disabled {
        background-color: var(--clr-median) !important;
      }

      input[type="radio"] {
        border-radius: 50%;
      }
      input:is([type="checkbox"], [type="radio"]):checked {
        background-color: var(--clr-lighter);
      }
      input:is([type="text"], [type="date"]),
      button,
      select {
        height: 28px;
        line-height: 28px;
        padding: 0 5px;
      }
      label {
        display: flex;
        align-items: center;
        height: 28px;
        line-height: 28px;
      }
      label > input:is([type="checkbox"], [type="radio"]) {
        margin-right: 1ch;
      }

      /*
      select {
        appearance: none;

        background-image: conic-gradient(from 180deg at 50% 99%, #0000 145deg, currentColor 145deg, currentColor 215deg, #0000 215deg);
        background-position: calc(100% - 1px) calc(50% + 1px);
        background-size: 12px 9px;
        background-origin: content-box;
        background-repeat: no-repeat;
      }
      */



      .col-mode {
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        align-items: stretch;
        gap: 10px;
      }
      .col-mode.compact {
        gap: 5px;
      }
      .row-mode {
        display: flex;
        flex-direction: row;
        gap: 10px;
      }
      .row-mode.compact {
        gap: 5px;
      }

      .bordered {
        padding: 5px;
        margin: 0;
        border: solid 1px var(--clr-lighter);
      }





      table {
        overflow: hidden;
        padding: 0;
        margin: 0;

        border-spacing: 2px;
        border-collapse: collapse;
        empty-cells: show;
      }

      table thead td {
        font-weight: 800;
        color: var(--clr-lighter);
        line-height: 23px;
        height: 23px;
      }

      table td {
        margin: 0;
        padding: 0 5px;
        white-space: nowrap;
        overflow: hidden;

        font-size: 13px;
        line-height: 21px;
        height: 21px;
        color: var(--clr-dark);
        border: 1px solid var(--clr-darker);
      }


      table .nm { width: auto }
      table .ao { width: 12ch }
      table .wo { width: 12ch }
      table .pi { width: 20ch }

      table td[colspan] {
        text-align: center;
      }

    </style>

    <script type="module" src="/assets/app.mjs"></script>
  </head>
  <body @vue:mounted="mounted">

<!-- <svg xmlns="http://www.w3.org/2000/svg"/>
<hr>
<img onerror="console.log(this.src)" src="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22/>">
<img onerror="console.log(this.src)" src="data:image/svg+xml,%3csvg xmlns=%22http://www.w3.org/2000/svg%22/%3e">
<img onerror="console.log(this.src)" src="data:image/bmp;base64,Qk0eAAAAAAAAABoAAAAMAAAAAQABAAEAGAAAAP8A">
<img onerror="console.log(this.src)" src="data:image/gif;base64,R0lGODlhASABICAgIDs=">
<hr>
 -->
    <h1>AutoIgnite Dash</h1>

    <form id="aid-filters" class="col-mode compact" @submit.prevent @change="model.filterParamsChanged">
      <select name="seriesid" v-model="model.source.seriesId" v-effe2ct="model.source.seriesId && model.source.loadTracked()">
        <option v-for="series in model.source.series" :value="series.seriesId">
          {{series.name}} ({{series.releaseYear}})
        </option>
      </select>
      <input type="text" name="filter-name" v-model="model.filter.params.name">
      <label><input type="checkbox" name="filter-unwatched" v-model="model.filter.params.unwatched"> Unwatched only</label>

    </form>

    <table id="aid-results">
      <colgroup><col class="nm"><col class="ao"><col class="wo"></colgroup>

      <thead>
        <tr><td>Name</td><td>Aired On</td><td>Watched On</td></tr>
      </thead>

      <tbody v-if="model.filter.results.length">
        <tr v-for="program in model.filter.results" :key="model.source.seriesId+'-'+program.ndx">
          <td>{{program.name}}</td>
          <td>{{program.airedOn}}</td>
          <td>{{program.watchedOn}}</td>
        </tr>
      </tbody>
      <tbody v-else>
        <tr><td colspan="10">Nothing to show</td></tr>
      </tbody>
    </table>

  </body>
</html>
