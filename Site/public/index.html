<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
    <link rel="icon" type="image/x-icon" href="data:,">
    <!-- <link rel="icon" href="data:image/gif;base64,R0lGODlhASABICAgIDs="> -->
    <link rel="stylesheet" href="/assets/base.css">

    <title>AutoIgnite Dashboard</title>

    <style>
      /*
      firebrick #b22222
      floralwhite #fffaf0
      ivory #fffff0
      maroon  #800000
      papayawhip  #ffefd5
      snow  #fffafa
      */

      h1 {
        margin: 0;
        padding: 0;
      }
      body > h1 {
        height: 1lh;
        line-height: 1lh;
        font-size: var(--font-size-h1);
      }






      form.aute {
        display: grid;
        grid-template: auto auto auto / auto min-content;
        gap: 5px 5px;
      }

      form.aute span,
      form.aute select[name="filter-seriesid"],
      form.aute .select-box {
        grid-column: 1 / -1;
      }

      form.aute span,
      form.aute label {
/*        white-space: nowrap;*/
      }
      form.aute > span {
        line-height: 0.77lh;
      }


      table {
        overflow: hidden;
        padding: 0;
        margin: 0;

        border-spacing: 2px;
        border-collapse: collapse;
        empty-cells: show;

        color: var(--clr-lighter);
      }

      table thead td {
        font-weight: 800;
        text-underline-offset: 1px;
        text-decoration: underline var(--clr-median);
      }

      table td {
        margin: 0;
        padding: 0 5px;
        white-space: nowrap;
        overflow: hidden;

        line-height: 1.667rem;
        border: solid 1px var(--clr-median);
      }
      table tbody tr td {
        font-size: var(--font-size-sm);
      }
      table tbody tr td:first-of-type {
        font-size: inherit;
      }

      table tbody tr:hover td {
        background-color: var(--clr-light);
        color: var(--clr-darkest);
      }

      table .nm { width: 100% }
      table .ao { width: auto }
      table .wo { width: auto }
      table .sk { width: auto }
      table tr td:last-of-type { text-align: right }


      table td[colspan] {
        text-align: center !important;
      }



      form.aute div.aa,
      form.aute div.bb {
        height: var(--ctl-vert-size);
        line-height: var(--ctl-vert-size);
        border: solid 1px var(--clr-median);
      }
      form.aute div.bb {
        border: 0;
      }
      div.testh {


        * {
          box-sizing: border-box;
          display: inline-block;
          appearance: none;
          height: 30px;
          line-height: 30px;
        }

        .aa, .cc {
          background-color: darkred;
          border: solid 1px lightblue;
        }
        .bb, .dd {
          background-color: darkorange;
        }


      }
    </style>

    <script type="module" src="/assets/app.mjs"></script>
  </head>
  <body @vue:mounted="mounted" cloak>

    <h1>AutoIgnite Dashboard</h1>

    <form class="aute" id="aute-filters" @submit.prevent @input="filterParamsChanged" @change="filterParamsChanged">
      <!--
      <select name="filter-seriesid" v-model="model.source.seriesId">
        <option v-for="series in model.source.series" :value="series.seriesId">
          {{series.name}} ({{series.releaseYear}})
        </option>
      </select>
      <button type="button">Select a series</button>
      -->
      <div class="select-box" tabindex="1">
        <span class="select-box__message" tabindex="1">Select a series</span>
        <div class="select-box__items">
          <label v-for="series in model.source.series">
            <input type="radio" name="filter-seriesid" :value="series.seriesId" v-model="model.source.seriesId">{{series.name}} ({{series.releaseYear}})
          </label>
        </div>
      </div>

      <input
        type="search" maxlength="30" spellcheck="false" autocorrect="off" autofocus
        placeholder="Filter program name (regex allowed)"
        name="filter-name"
        v-model="model.filter.params.name"
      >
      <label><input type="checkbox" name="filter-unwatched" v-model="model.filter.params.unwatched">Unwatched only</label>
      <span>Found: {{model.source.count}} │ Filtered: {{model.filter.count}}</span>

    </form>

    <div class="testh"><div class="aa">agsdfRid</div><div class="bb">agsdfRid</div><input class="cc" type="text" value="agsdfRid"><input class="dd" type="search" value="agsdfRid"></div>

    <table class="aute" id="aute-results">
      <colgroup><col class="nm"><col class="ao"><col class="wo"><col class="sk"></colgroup>

      <thead>
        <tr><td>Name</td><td>Aired On</td><td>Watched</td><td>Key</td></tr>
      </thead>

      <tbody v-if="model.filter.results.length">
        <tr v-for="program in model.filter.results" :key="model.source.seriesId+'-'+program.seepKey">
          <td>{{program.name}}</td>
          <td>{{program.airedOn}}</td>
          <td>{{program.watchedOn}}</td>
          <td>{{seep(program.seepKey)}}</td>
        </tr>
      </tbody>

      <tbody v-else>
        <tr><td colspan="10">Nothing to show</td></tr>
      </tbody>
    </table>

    <div id="spinner">LOADING</div>

  </body>
</html>
