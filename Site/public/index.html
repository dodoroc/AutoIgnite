<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
    <link rel="icon" type="image/x-icon" href="data:,">
    <!-- <link rel="icon" href="data:image/gif;base64,R0lGODlhASABICAgIDs="> -->
    <title>AutoIgnite Dashboard</title>

    <style>
      :root {
        --clr-darkest:  hsl(0, 0%,  10%);
        --clr-darker:   hsl(0, 0%,  25%);
        --clr-dark:     hsl(0, 0%,  42%);
        --clr-median:   hsl(0, 0%,  50%);
        --clr-light:    hsl(0, 0%,  58%);
        --clr-lighter:  hsl(0, 0%,  75%);
        --clr-lightest: hsl(0, 0%,  90%);

        --clr-warn:     hsl(0, 100%, 53%);

        --font-size-h1: 1.476rem;
        --font-size-h2: 1.383rem;
        --font-size-h3: 1.296rem;
        --font-size-h4: 1.215rem;
        --font-size-h5: 1.138rem;
        --font-size-h6: 1.067rem;
        --font-size-rg: 1.000rem;
        --font-size-sm: 0.937rem;
        --font-size-xs: 0.878rem;

        --font-spc-1_1:  ;
        --font-spc-1_2:  ;
        --font-spc-1_3:  ;
        --font-spc-1_4:  ; /* std width space */


        --width-max: 1050px;

        --width-scrollbar: calc(100vw - 100%);
        --width-available: calc(100vw - (100vw - 100%));

        --ctl-base-size: 28px;
        --ctl-ckrd-size: 16px;
      }

      @media (prefers-color-scheme: light) {
        :root {
        }
      }

      /*
      firebrick #b22222
      floralwhite #fffaf0
      ivory #fffff0
      maroon  #800000
      papayawhip  #ffefd5
      snow  #fffafa
      */

      html {
        overflow: hidden auto;
        overscroll-behavior: none;

        scrollbar-gutter: stable;
        scrollbar-width: thin;
        _scrollbar-color: var(--clr-median) var(--clr-darkest);
      }

      html, body {
        margin: 0;
        padding: 0;

        font: normal normal 14px/1.4 tahoma, arial, sans-serif;
      }

      *, *::before, *::after {
        box-sizing: inherit;
        font: inherit;
      }

      body {
        position: relative;
        box-sizing: border-box;
        overflow: hidden;


        max-width: var(--width-max);
        margin: 0 auto;

        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        align-items: stretch;
        gap: 10px 0;
        padding: 5px;

        color: var(--clr-lighter);
        background: var(--clr-darkest);
        font-size: var(--font-size-rg);
      }

      h1 {
        margin: 0;
        padding: 0;
      }
      body > h1 {
        height: 2.1rem;
        line-height: 2.1rem;
        font-size: var(--font-size-h1);
      }







      button, input, textarea, select {
        display: inline-block;
        appearance: none;
        color: var(--clr-lighter);
        background-color: var(--clr-darker);
        border: solid 1px var(--clr-median);
        outline: none;
        transition: 200ms linear;
        transition-property: border-color, background-color, color, transform;
      }
      button, input:is([type="button"], [type="submit"], [type="clear"]) {
        text-align: center;
        cursor: pointer;
      }
      :is(:not(button, input[type="button"], [type="checkbox"], [type="radio"])):focus {
        background-color: var(--clr-darkest);
        border-color: var(--clr-lighter);
      }
      button:active, input:is([type="button"], [type="submit"], [type="clear"]):active {
        color: var(--clr-darkest);
        background-color: var(--clr-lightest);
        border-color: var(--clr-lightest);
        border-color: darkmagenta;
      }

      input:is([type="checkbox"], [type="radio"]) {
        display: inline-grid;
        place-content: center;

        width: var(--ctl-ckrd-size);
        height: var(--ctl-ckrd-size);
        margin: 0;
        padding: 0;
        border: solid 1px var(--clr-median);
        vertical-align: text-bottom;

        color: var(--clr-lighter);
      }

      input:is([type="checkbox"], [type="radio"])::before {
        transition: inherit;
        display: inline-block;
        content: '';

        width: calc(var(--ctl-ckrd-size) / 1.8);
        height: calc(var(--ctl-ckrd-size) / 1.8);
        transform: scale(0);
        box-shadow: inset 0 0 0px var(--ctl-ckrd-size) var(--clr-lighter);
        zoom: 0.94;
      }

      input:is([type="checkbox"], [type="radio"]):checked::before {
        transform: scale(1);
      }

      input[type="radio"],
      input[type="radio"]::before {
        border-radius: 50%;
      }

      input:is([type="checkbox"], [type="radio"]):enabled {
        cursor: pointer;
      }

      input:is([type="checkbox"], [type="radio"]):disabled {
        background-color: var(--clr-median) !important;
      }
      input:is([type="checkbox"], [type="radio"]):checked:not(:disabled) {
/*        background-color: var(--clr-lighter);*/
      }



      label:has([type="checkbox"], [type="radio"]) {
        column-gap: 0.8ch;
      }
      label:has(+ [type="checkbox"], + [type="radio"]) {
        margin-right: 0.8ch;
      }
      input:is([type="checkbox"], [type="radio"]) + label {
        margin-left: 0.8ch;
      }

      input[type="radio"]:focus {
      }

/*
*/




      label,
      input:is([type="text"], [type="date"]),
      button,
      select {
        height: var(--ctl-base-size);
        line-height: var(--ctl-base-size);
        padding: 0 5px;
      }
      label {
        display: inline-flex;
        align-items: center;
      }

      select {
        position: relative;
        background-image: conic-gradient(from 180deg at 50% 100%, #0000 145deg, currentColor 145deg, currentColor 215deg, #0000 215deg);
        background-position: 99.8% 52%;
        background-size: 10px 7px;
        background-origin: content-box;
        background-repeat: no-repeat;
      }


      /*
      */
      .tri {
        background-image: conic-gradient(from 180deg at 50% 100%, #0000 145deg, currentColor 145deg, currentColor 215deg, #0000 215deg);
        background-position: 99.8% 52%;
        background-size: 10px 7px;
        background-origin: content-box;
        background-repeat: no-repeat;
      }





      form.aute {
        display: grid;
        grid-template: auto auto auto / auto min-content;
        gap: 5px;
      }

      form.aute span,
      form.aute select[name="filter-seriesid"] {
        grid-column: 1 / -1;
      }

      form.aute label {
        white-space: nowrap;
      }


      table {
        overflow: hidden;
        padding: 0;
        margin: 0;

        border-spacing: 2px;
        border-collapse: collapse;
        empty-cells: show;

        color: var(--clr-lighter);
      }

      table thead td {
        font-weight: 800;
        line-height: 23px;
        height: 23px;
        text-underline-offset: 2.5px;
        text-decoration: underline var(--clr-median);
      }

      table td {
        margin: 0;
        padding: 0 5px;
        white-space: nowrap;
        overflow: hidden;

        font-size: 13px;
        line-height: 22px;
        height: 22x;
        border: solid 1px var(--clr-median);
      }

      table tbody tr:hover td {
        color: var(--clr-lightest);
/*        color: antiquewhite;*/
      }

      table .nm { width: 100% }
      table .ao { width: auto }
      table .wo { width: auto }
      table .sk { width: auto }
      table tr td:last-of-type { text-align: right }


      table td[colspan] {
        text-align: center !important;
      }

      #spinner {
        display: grid;
        height: calc(100dvh - 10px);
        place-content: center;

        font-size: clamp(24px, 9dvmin, 56px);
        color: #0000;

        background: no-repeat radial-gradient(var(--clr-lighter) 0px, var(--clr-darker) 100px, var(--clr-darkest) 250px);
        background-clip: text;
        background-size: 80cqmin 80cqmin;
        background-position: 50% 50%;
        filter: blur(1.5px);

        animation: 1s infinite spinner;
      }
      @keyframes spinner {
          0% { background-position: calc(50% +  80.0px) calc(50% +   0.0px) }
          5% { background-position: calc(50% +  76.1px) calc(50% +  24.7px) }
         10% { background-position: calc(50% +  64.7px) calc(50% +  47.0px) }
         15% { background-position: calc(50% +  47.0px) calc(50% +  64.7px) }
         20% { background-position: calc(50% +  24.7px) calc(50% +  76.1px) }
         25% { background-position: calc(50% +   0.0px) calc(50% +  80.0px) }
         30% { background-position: calc(50% + -24.7px) calc(50% +  76.1px) }
         35% { background-position: calc(50% + -47.0px) calc(50% +  64.7px) }
         40% { background-position: calc(50% + -64.7px) calc(50% +  47.0px) }
         45% { background-position: calc(50% + -76.1px) calc(50% +  24.7px) }
         50% { background-position: calc(50% + -80.0px) calc(50% +   0.0px) }
         55% { background-position: calc(50% + -76.1px) calc(50% + -24.7px) }
         60% { background-position: calc(50% + -64.7px) calc(50% + -47.0px) }
         65% { background-position: calc(50% + -47.0px) calc(50% + -64.7px) }
         70% { background-position: calc(50% + -24.7px) calc(50% + -76.1px) }
         75% { background-position: calc(50% +  -0.0px) calc(50% + -80.0px) }
         80% { background-position: calc(50% +  24.7px) calc(50% + -76.1px) }
         85% { background-position: calc(50% +  47.0px) calc(50% + -64.7px) }
         90% { background-position: calc(50% +  64.7px) calc(50% + -47.0px) }
         95% { background-position: calc(50% +  76.1px) calc(50% + -24.7px) }
        100% { background-position: calc(50% +  80.0px) calc(50% +   0.0px) }
      }

      [cloak] > :not(#spinner) {
        display: none;
      }
      :not([cloak]) > #spinner {
        display: none !important;
      }
/*
  let x,y,p, str = '';
  let A = Math.PI / 180 * 18;
  for (let i = 0; i <= 20; i++) {
    x = 80 * Math.cos(i*A);
    y = 80 * Math.sin(i*A);
    x = new String(x.toFixed(1)).padStart(5, ' ');
    y = new String(y.toFixed(1)).padStart(5, ' ');
    p = new String(i*5).padStart(3, ' ');
    str += `  ${p}% { background-position: calc(50% + ${x}px) calc(50% + ${y}px) }\n`;
  }
  console.log(str);
*/


      .select-box {
        position: relative;
        display: inline-flex;
        flex-flow: column nowrap;
        justify-content: flex-start;
        align-items: stretch;

        transition: 200ms linear;
        transition-property: border-color, background-color, color, transform;
      }
      .select-box:focus-within {
      }

      .select-box input {
        position: absolute;
        opacity: 0;
        appearance: none;
      }

      .select-box label {
        position: sticky;
        color: var(--clr-lighter);
        background-color: var(--clr-darker);
        border: solid 1px var(--clr-median);
        height: var(--ctl-base-size);
        line-height: var(--ctl-base-size);
        padding: 0 5px;
      }



      .select-box lab2el input {
        position: absolute;
        _visibility: hidden;
        appearance: none;
        _height: 0;
        _width: 0;

        color: var(--clr-lighter);
        background-color: var(--clr-darker);
        border: solid 1px var(--clr-median);

      }

      .select-box label:has(input[value=""]:not(:checked)) {
        display: none;
      }

      .select-box label:has(input:checked) {
        background-color: darkmagenta;
        order: -1;
      }


      .select-box labe2l:has(input:not(:checked)) {
/*        display: none;*/
      }
      .select-box:focus-within label {
/*        display: initial !important;*/
      }

      .select-box:has(:active) {
        outline: solid 3px lightgreen
      }
/*      .select-box:focus { background-color: #f004 }*/
      .select-box:has(:focus) {
        background-color: #0ff4
      }
/*      .select-box label:focus-visible { background-color: #00f4 }*/
      .select-box input[type="radio"]:focus {
      }


    </style>

    <script type="module" src="/assets/app.mjs"></script>
  </head>
  <body @vue:mounted="mounted" cloak>

    <h1>AutoIgnite Dashboard</h1>
    <div class="tri" style="background-color: pink; width: 10px; height: 10px"></div>
    <div class="tri" style="background-color: pink; width: 10px; height: 12px"></div>

    <form class="aute" id="aute-filters" @submit.prevent @input="filterParamsChanged" @change="filterParamsChanged">
      <select name="filter-seriesid" v-model="model.source.seriesId">
        <option v-for="series in model.source.series" :value="series.seriesId">
          {{series.name}} ({{series.releaseYear}})
        </option>
      </select>
      <input
        type="text" placeholder="Filter program name (regex allowed)" maxlength="50" spellcheck="false" autocorrect="off"
        name="filter-name"
        v-model="model.filter.params.name"
      >
      <label><input type="checkbox" name="filter-unwatched" v-model="model.filter.params.unwatched">Unwatched only</label>
      <!--       -->
      <span>Found: {{model.source.count}} │ Filtered: {{model.filter.count}}</span>
      <button>asdf</button>
      <!-- <label><input type="radio" name="filter-x"> xxxxxxx</label> -->
      <label><input type="checkbox" checked>asdf<input type="radio" name="xx" value="1" checked>dd<input type="radio" name="xx" value="2">ee</label>
      <textarea></textarea>
      <div class="select-box" tabindex="1">
        <label><input type="radio" name="rads" value="" checked>Select a series</label>
        <label><input type="radio" name="rads" value="a">aaaa</label>
        <label><input type="radio" name="rads" value="b">bbbb</label>
        <label><input type="radio" name="rads" value="c">cccc</label>
        <label><input type="radio" name="rads" value="d">dddd</label>
      </div>
    </form>

    <table class="aute" id="aute-results">
      <colgroup><col class="nm"><col class="ao"><col class="wo"><col class="sk"></colgroup>

      <thead>
        <tr><td>Name</td><td>Aired On</td><td>Watched</td><td>Key</td></tr>
      </thead>

      <tbody v-if="model.filter.results.length">
        <tr v-for="program in model.filter.results" :key="model.source.seriesId+'-'+program.seepKey">
          <td>{{program.name}}</td>
          <td>{{program.airedOn}}</td>
          <td>{{program.watchedOn}}</td>
          <td>{{seep(program.seepKey)}}</td>
        </tr>
      </tbody>

      <tbody v-else>
        <tr><td colspan="10">Nothing to show</td></tr>
      </tbody>
    </table>

    <div id="spinner">LOADING</div>

  </body>
</html>
