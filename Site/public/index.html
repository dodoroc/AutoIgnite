<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
    <link rel="icon" type="image/x-icon" href="data:,">
    <!-- <link rel="icon" href="data:image/x-icon;base64,AA"> -->
    <!-- <link rel="icon" href="data:image/x-icon;base64,AAAAAQAA"> -->
    <!-- <link rel="icon" href="data:image/bmp;base64,Qk0eAAAAAAAAABoAAAAMAAAAAQABAAEAGAAAAP8A"> -->
    <!-- <link rel="icon" href="data:image/gif;base64,R0lGODlhASABICAgIDs="> -->
    <title>AutoIgnite Dashboard</title>

    <style>
      :root {
        --clr-darkest:  hsl(0, 0%,  10%);
        --clr-darker:   hsl(0, 0%,  25%);
        --clr-median:   hsl(0, 0%,  50%);
        --clr-lighter:  hsl(0, 0%,  75%);
        --clr-lightest: hsl(0, 0%,  90%);

        --clr-warn:     hsl(0, 100%, 53%);

        --font-size-h1: 1.476rem;
        --font-size-h2: 1.383rem;
        --font-size-h3: 1.296rem;
        --font-size-h4: 1.215rem;
        --font-size-h5: 1.138rem;
        --font-size-h6: 1.067rem;
        --font-size-rg: 1.000rem;
        --font-size-sm: 0.937rem;
        --font-size-xs: 0.878rem;

        --width-max: 1050px;

        --width-scrollbar: calc(100vw - 100%);
        --width-available: calc(100vw - (100vw - 100%));
      }

      @media (prefers-color-scheme: light) {
        :root {
        }
      }

      /*
      firebrick #b22222
      floralwhite #fffaf0
      ivory #fffff0
      maroon  #800000
      papayawhip  #ffefd5
      snow  #fffafa
      */

      html {
        overflow: hidden auto;
        overscroll-behavior: none;

        scrollbar-gutter: stable;
        scrollbar-width: thin;
        scrollbar-color: var(--clr-median) var(--clr-darkest);
      }

      html, body {
        margin: 0;
        padding: 0;

        font: normal normal 14px/1.4 tahoma, arial, sans-serif;
      }

      *, *::before, *::after {
        box-sizing: inherit;
        font: inherit;
      }

      body {
        position: relative;
        box-sizing: border-box;
        overflow: hidden;

        max-width: var(--width-max);
        margin: 0 auto;

        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        align-items: stretch;
        gap: 10px 0;
        padding: 5px;

        color: var(--clr-lighter);
        background: var(--clr-darkest);
        font-size: var(--font-size-rg);
      }

      h1 {
        margin: 0;
        padding: 0;
      }
      body > h1 {
        height: 2.1rem;
        line-height: 2.1rem;
        font-size: var(--font-size-h1);
      }
      section > h1 {
        font-size: var(--font-size-h3);
        line-height: 1;
        font-weight: lighter;
        font-variant-caps: all-small-caps;
      }

      button, input, textarea, select, datalist {
        color: var(--clr-darker);
        background-color: var(--clr-lighter);
        border: solid 1px var(--clr-lighter);
        outline: none;
        transition: 200ms linear;
        transition-property: border-color, background-color, color;
      }
      button, input:is([type="button"], [type="submit"], [type="clear"]) {
        text-align: center;
        cursor: pointer;
      }
      button:active, input:is([type="button"], [type="submit"], [type="clear"]):active {
        color: var(--clr-darkest);
        background-color: var(--clr-lightest);
        border-color: var(--clr-lightest);
      }
      :is(:not(button, input[type="button"], [type="checkbox"], [type="radio"])):focus {
        background-color: var(--clr-lightest);
        border-color: var(--clr-lightest);
      }
      input:is([type="checkbox"], [type="radio"]) {
        width: 16px;
        height: 16px;
        margin: 0;
        padding: 3px;
        color: var(--clr-lighter);
        background-color: transparent;
        background-clip: content-box;
        border: solid 1px var(--clr-lighter);

        appearance: none;
        zoom: 1;
      }
      input:is([type="checkbox"], [type="radio"]):enabled {
        cursor: pointer;
      }
      input:is([type="checkbox"], [type="radio"]):disabled {
        background-color: var(--clr-median) !important;
      }

      input[type="radio"] {
        border-radius: 50%;
      }
      input:is([type="checkbox"], [type="radio"]):checked {
        background-color: var(--clr-lighter);
      }
      input:is([type="text"], [type="date"]),
      button,
      select {
        height: 28px;
        line-height: 28px;
        padding: 0 5px;
      }
      label {
        display: flex;
        align-items: center;
        height: 28px;
        line-height: 28px;
      }
      label > input:is([type="checkbox"], [type="radio"]) {
        margin-right: 1ch;
      }

      /*
      select {
        appearance: none;

        background-image: conic-gradient(from 180deg at 50% 99%, #0000 145deg, currentColor 145deg, currentColor 215deg, #0000 215deg);
        background-position: calc(100% - 1px) calc(50% + 1px);
        background-size: 12px 9px;
        background-origin: content-box;
        background-repeat: no-repeat;
      }
      */



      .col-mode {
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        align-items: stretch;
        gap: 10px;
      }
      .col-mode.compact {
        gap: 5px;
      }
      .row-mode {
        display: flex;
        flex-direction: row;
        gap: 10px;
      }
      .row-mode.compact {
        gap: 5px;
      }

      .bordered {
        padding: 5px;
        margin: 0;
        border: solid 1px var(--clr-lighter);
      }





      /* Custom search stuff
       *
       */


      #search-criteria fieldset {
        display: grid;
        grid-template-columns: minmax(6ch, max-content) minmax(0, 1fr) minmax(6ch, max-content) minmax(0, 1fr);
        grid-template-rows: repeat(4, min-content);
        gap: 5px;
      }
      #search-criteria fieldset[disabled] {
        cursor: not-allowed;
      }
      #search-criteria fieldset[disabled] * {
        pointer-events: none;
        user-select: none;
      }

      #search-criteria fieldset label {
        justify-content: flex-end;
      }

      #search-criteria fieldset label[for="criteria-series-name"] { grid-area: 1 / 1 / 1 / 2 }
      #search-criteria fieldset input[id="criteria-series-name"] { grid-area: 1 / 2 / 1 / 5 }

      #search-criteria fieldset label[for="criteria-date-min"] { grid-area: 2 / 1 / 2 / 2 }
      #search-criteria fieldset input[id="criteria-date-min"] { grid-area: 2 / 2 / 2 / 3 }

      #search-criteria fieldset label[for="criteria-date-max"] { grid-area: 2 / 3 / 2 / 4; justify-content: center }
      #search-criteria fieldset input[id="criteria-date-max"] { grid-area: 2 / 4 / 2 / 5 }

      #search-criteria fieldset label[for="criteria-season-min"] { grid-area: 3 / 1 / 3 / 2 }
      #search-criteria fieldset input[id="criteria-season-min"] { grid-area: 3 / 2 / 3 / 3 }

      #search-criteria fieldset label[for="criteria-season-max"] { grid-area: 3 / 3 / 3 / 4; justify-content: center }
      #search-criteria fieldset input[id="criteria-season-max"] { grid-area: 3 / 4 / 3 / 5 }

      #search-criteria fieldset label[for="criteria-type-show"] {
        grid-area: 4 / 2 / 4 / 5;
        justify-content: flex-start;
      }
      #search-criteria fieldset label[for="criteria-type-show"]:focus-within {
        background-color: var(--clr-lightest);
        border-color: var(--clr-lightest);
      }



      .results {
        display: grid;
        gap: 1px 0;
        grid-template-columns: fit-content(4rem) min-content 1fr 4rem 4rem;
        background-clip: content-box;
        background-color: var(--clr-darker);
/*        background-color: var(--clr-median);*/
      }
      .results b {
        font-weight: bold;
      }
      .results :is(b,i) {
        font-size: 12px;
        line-height: 22px;
        height: 22px;
        font-style: normal;
        word-break: break-all;
        overflow: hidden;
        background-color: var(--clr-darkest);
        _border: solid var(--clr-darkest);
        _border-width: 0 4px;
        padding: 0 3px;
        background-color: pink;

      }
      .results :nth-child(5n + 1) {
        border-left: 0;
        background-color: orange;
      }
      .results :nth-child(5n + 5) {
        border-right: 0;
      }

      table {
        box-sizing: border-box;
/*        max-width: 100%;*/
/*        width: 100%;*/
        overflow: hidden;
        padding: 0;
        margin: 0;

/*        table-layout: fixed;*/
        empty-cells: show;

        border-spacing: 2px;
        border-collapse: collapse;
        background-color: var(--clr-median);
      }

      table thead td {
        font-weight: 600;
        color: var(--clr-lighter);
      }

      table td {
        margin: 0;
        padding: 0 5px;
        white-space: nowrap;
        overflow: hidden;

        font-size: 13px;
        line-height: 21px;
        height: 21px;
        background-color: var(--clr-darker);
        color: var(--clr-median);
        border: 1px solid transparent;
      }


/*      table .a { width: 10ch }*/
/*      table .b { width: 10ch }*/
/*      table .c { width: auto }*/
/*      table .d { width: 10ch }*/
/*      table .e { width: 10ch }*/

      table tr {
/*        background-color: rgba(255,255,255, 0.2);*/
      }
      table td[colspan] {
        text-align: center;
      }

    </style>

    <script type="module" src="/assets/app.mjs"></script>
  </head>
  <body @vue:mounted="mounted" v-effect="test">

<!-- <svg xmlns="http://www.w3.org/2000/svg"/>
<hr>
<img onerror="console.log(this.src)" src="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22/>">
<img onerror="console.log(this.src)" src="data:image/svg+xml,%3csvg xmlns=%22http://www.w3.org/2000/svg%22/%3e">
<img onerror="console.log(this.src)" src="data:image/bmp;base64,Qk0eAAAAAAAAABoAAAAMAAAAAQABAAEAGAAAAP8A">
<img onerror="console.log(this.src)" src="data:image/gif;base64,R0lGODlhASABICAgIDs=">
<hr>
 -->
    <h1>AutoIgnite Dash</h1>

    <form id="aid-filters" class="col-mode compact" @submit="">
      <!-- <select name="series-select" @change="seriesChanged" v-model="store.selectedSeriesId" v-effect="store.loadSeries()"> -->
      <select name="series-select" @input="alert($el)" @change="seriesChanged" v-model="store.selectedSeriesId" v-effect="store.loadPrograms">
        <option v-for="series in store.series" :value="series.seriesId">
          {{series.name}} ({{series.releaseYear}})
        </option>
      </select>

    </form>

    <table id="aid-results">
      <colgroup><col class="nm"><col class="ao"><col class="wo"></colgroup>

      <thead>
        <tr><td>Name</td><td>Aired On</td><td>Watched On</td></tr>
      </thead>

      <tbody v-if="store.filtered.length">
      <!-- <tbody v-if="store.filtered.length"> -->
        <tr v-for="program in store.programs" :key="program.programId">
          <td>{{program.name}}</td>
          <td>{{program.airedOn}}</td>
          <td>{{program.watchedOn}}</td>
        </tr>
      </tbody>
      <tbody v-else>
        <tr><td colspan="10">Nothing to show</td></tr>
      </tbody>
    </table>

  </body>
</html>
